{"time":"2025-03-10T22:59:27.16326+03:00","level":"INFO","source":{"function":"main.main","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/cmd/main.go","line":12},"msg":"logger initialized"}
{"time":"2025-03-10T22:59:27.163838+03:00","level":"INFO","source":{"function":"server/config.ParseConfig","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/config/parse.go","line":10},"msg":"checking for config file","file":"config.yaml"}
{"time":"2025-03-10T22:59:27.164398+03:00","level":"INFO","source":{"function":"server/config.ParseConfig","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/config/parse.go","line":28},"msg":"config loaded and validated","config":{"port":8080,"logLevel":"DEBUG"}}
{"time":"2025-03-10T22:59:27.174743+03:00","level":"INFO","source":{"function":"server/db.Init","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/initDB.go","line":34},"msg":"connected to the database"}
{"time":"2025-03-10T22:59:27.174782+03:00","level":"INFO","source":{"function":"server/handlers.newDB","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/handlers/info.go","line":38},"msg":"database initialized successfully"}
{"time":"2025-03-10T22:59:27.174797+03:00","level":"INFO","source":{"function":"server/handlers.NewServer","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/handlers/info.go","line":56},"msg":"server created successfully","address":"localhost:8080"}
{"time":"2025-03-10T22:59:27.174844+03:00","level":"INFO","source":{"function":"server/server.Run.func1","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/server/server.go","line":37},"msg":"starting HTTP server on port: 8080"}
{"time":"2025-03-10T22:59:40.715083+03:00","level":"INFO","source":{"function":"server/handlers.(*Server).PaymentHandling","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/handlers/pay.go","line":17},"msg":"getting payment info"}
{"time":"2025-03-10T22:59:40.716234+03:00","level":"INFO","source":{"function":"server/handlers.(*Server).PaymentHandling","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/handlers/pay.go","line":26},"msg":"payment data unmarshaled successfully","paymentData":{"orderID":1,"IsPaid":true,"paymentID":368263273238023}}
{"time":"2025-03-10T22:59:40.716326+03:00","level":"INFO","source":{"function":"server/handlers.(*Server).OrderHandling","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/handlers/info.go","line":62},"msg":"received request for InfoHandler"}
{"time":"2025-03-10T22:59:40.717145+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":12},"msg":"getting flower availability and cost","flowerName":"Роза Жёлтая"}
{"time":"2025-03-10T22:59:40.720078+03:00","level":"INFO","source":{"function":"server/db.(*Database).GetFlowerQtyAndPrice","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/getFlowersQtyAndPrice.go","line":22},"msg":"retrieved 192 units at price 40 for Роза Жёлтая"}
{"time":"2025-03-10T22:59:40.720165+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":20},"msg":"available quantity and price retrieved","availableQuantity":192,"price":40}
{"time":"2025-03-10T22:59:40.720191+03:00","level":"INFO","source":{"function":"server/businessLogic.validateQuantity","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":35},"msg":"validating quantity","flower":"Роза Жёлтая","currentQuantity":11,"availableQuantity":192}
{"time":"2025-03-10T22:59:40.722014+03:00","level":"INFO","source":{"function":"server/db.(*Database).UpdateFlowerQty","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/updateFlowerQty.go","line":27},"msg":"updated quantity by 11 for Роза Жёлтая"}
{"time":"2025-03-10T22:59:40.722042+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":30},"msg":"flower cost calculated","flowerName":"Роза Жёлтая","cost":440}
{"time":"2025-03-10T22:59:40.722083+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).validateFlowersQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":89},"msg":"quantity updated","flower":"Роза Жёлтая","quantity":11}
{"time":"2025-03-10T22:59:40.7221+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).validateFlowersQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":91},"msg":"flower cost info","quantity":11,"cost":440}
{"time":"2025-03-10T22:59:40.722111+03:00","level":"DEBUG","source":{"function":"server/businessLogic.updateTotalCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":100},"msg":"total cost updated","newTotalCost":440}
{"time":"2025-03-10T22:59:40.722167+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).updateBouquets","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":56},"msg":"flower updated","name":"Роза","quantity":11,"cost":440}
{"time":"2025-03-10T22:59:40.722194+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":12},"msg":"getting flower availability and cost","flowerName":"Лилия Жёлтая"}
{"time":"2025-03-10T22:59:40.72251+03:00","level":"INFO","source":{"function":"server/db.(*Database).GetFlowerQtyAndPrice","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/getFlowersQtyAndPrice.go","line":22},"msg":"retrieved 11930 units at price 90 for Лилия Жёлтая"}
{"time":"2025-03-10T22:59:40.722527+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":20},"msg":"available quantity and price retrieved","availableQuantity":11930,"price":90}
{"time":"2025-03-10T22:59:40.722534+03:00","level":"INFO","source":{"function":"server/businessLogic.validateQuantity","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":35},"msg":"validating quantity","flower":"Лилия Жёлтая","currentQuantity":5,"availableQuantity":11930}
{"time":"2025-03-10T22:59:40.722948+03:00","level":"INFO","source":{"function":"server/db.(*Database).UpdateFlowerQty","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/updateFlowerQty.go","line":27},"msg":"updated quantity by 5 for Лилия Жёлтая"}
{"time":"2025-03-10T22:59:40.722957+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":30},"msg":"flower cost calculated","flowerName":"Лилия Жёлтая","cost":450}
{"time":"2025-03-10T22:59:40.722962+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).validateFlowersQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":89},"msg":"quantity updated","flower":"Лилия Жёлтая","quantity":5}
{"time":"2025-03-10T22:59:40.722967+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).validateFlowersQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":91},"msg":"flower cost info","quantity":5,"cost":450}
{"time":"2025-03-10T22:59:40.722971+03:00","level":"DEBUG","source":{"function":"server/businessLogic.updateTotalCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":100},"msg":"total cost updated","newTotalCost":890}
{"time":"2025-03-10T22:59:40.722982+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).updateBouquets","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":56},"msg":"flower updated","name":"Лилия","quantity":5,"cost":450}
{"time":"2025-03-10T22:59:40.722991+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetDecorationCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/decorationCost.go","line":16},"msg":"getting decoration cost","postcard":"С 8 марта!","pack":"Крафт"}
{"time":"2025-03-10T22:59:40.723501+03:00","level":"INFO","source":{"function":"server/db.(*Database).GetDecorElementPrice","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/getDecorElementPrice.go","line":20},"msg":"postcard price: 15"}
{"time":"2025-03-10T22:59:40.723944+03:00","level":"INFO","source":{"function":"server/db.(*Database).GetDecorElementPrice","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/getDecorElementPrice.go","line":20},"msg":"pack price: 100"}
{"time":"2025-03-10T22:59:40.723959+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetDecorationCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/decorationCost.go","line":30},"msg":"decoration cost retrieved","postcardPrice":15,"packPrice":100}
{"time":"2025-03-10T22:59:40.723966+03:00","level":"DEBUG","source":{"function":"server/businessLogic.updateTotalCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":100},"msg":"total cost updated","newTotalCost":1005}
{"time":"2025-03-10T22:59:40.723972+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":12},"msg":"getting flower availability and cost","flowerName":"Ромашка Белая"}
{"time":"2025-03-10T22:59:40.724264+03:00","level":"INFO","source":{"function":"server/db.(*Database).GetFlowerQtyAndPrice","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/getFlowersQtyAndPrice.go","line":22},"msg":"retrieved 11300 units at price 20 for Ромашка Белая"}
{"time":"2025-03-10T22:59:40.724279+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":20},"msg":"available quantity and price retrieved","availableQuantity":11300,"price":20}
{"time":"2025-03-10T22:59:40.724285+03:00","level":"INFO","source":{"function":"server/businessLogic.validateQuantity","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":35},"msg":"validating quantity","flower":"Ромашка Белая","currentQuantity":50,"availableQuantity":11300}
{"time":"2025-03-10T22:59:40.724711+03:00","level":"INFO","source":{"function":"server/db.(*Database).UpdateFlowerQty","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/updateFlowerQty.go","line":27},"msg":"updated quantity by 50 for Ромашка Белая"}
{"time":"2025-03-10T22:59:40.72472+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":30},"msg":"flower cost calculated","flowerName":"Ромашка Белая","cost":1000}
{"time":"2025-03-10T22:59:40.724742+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).validateFlowersQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":89},"msg":"quantity updated","flower":"Ромашка Белая","quantity":50}
{"time":"2025-03-10T22:59:40.724788+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).validateFlowersQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":91},"msg":"flower cost info","quantity":50,"cost":1000}
{"time":"2025-03-10T22:59:40.724847+03:00","level":"DEBUG","source":{"function":"server/businessLogic.updateTotalCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":100},"msg":"total cost updated","newTotalCost":1000}
{"time":"2025-03-10T22:59:40.725019+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).updateBouquets","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":56},"msg":"flower updated","name":"Ромашка","quantity":50,"cost":1000}
{"time":"2025-03-10T22:59:40.725053+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":12},"msg":"getting flower availability and cost","flowerName":"Пион Белый"}
{"time":"2025-03-10T22:59:40.725653+03:00","level":"INFO","source":{"function":"server/db.(*Database).GetFlowerQtyAndPrice","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/getFlowersQtyAndPrice.go","line":22},"msg":"retrieved 11930 units at price 110 for Пион Белый"}
{"time":"2025-03-10T22:59:40.725807+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":20},"msg":"available quantity and price retrieved","availableQuantity":11930,"price":110}
{"time":"2025-03-10T22:59:40.725823+03:00","level":"INFO","source":{"function":"server/businessLogic.validateQuantity","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":35},"msg":"validating quantity","flower":"Пион Белый","currentQuantity":5,"availableQuantity":11930}
{"time":"2025-03-10T22:59:40.726375+03:00","level":"INFO","source":{"function":"server/db.(*Database).UpdateFlowerQty","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/updateFlowerQty.go","line":27},"msg":"updated quantity by 5 for Пион Белый"}
{"time":"2025-03-10T22:59:40.726412+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetFlowerAvailQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/flowerQuantityAndCost.go","line":30},"msg":"flower cost calculated","flowerName":"Пион Белый","cost":550}
{"time":"2025-03-10T22:59:40.726458+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).validateFlowersQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":89},"msg":"quantity updated","flower":"Пион Белый","quantity":5}
{"time":"2025-03-10T22:59:40.726468+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).validateFlowersQtyAndCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":91},"msg":"flower cost info","quantity":5,"cost":550}
{"time":"2025-03-10T22:59:40.726473+03:00","level":"DEBUG","source":{"function":"server/businessLogic.updateTotalCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":100},"msg":"total cost updated","newTotalCost":1550}
{"time":"2025-03-10T22:59:40.726497+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).updateBouquets","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":56},"msg":"flower updated","name":"Пион","quantity":5,"cost":550}
{"time":"2025-03-10T22:59:40.72653+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetDecorationCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/decorationCost.go","line":16},"msg":"getting decoration cost","postcard":"С Днём Влюбленных!","pack":"Лента"}
{"time":"2025-03-10T22:59:40.726795+03:00","level":"INFO","source":{"function":"server/db.(*Database).GetDecorElementPrice","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/getDecorElementPrice.go","line":20},"msg":"postcard price: 20"}
{"time":"2025-03-10T22:59:40.727004+03:00","level":"INFO","source":{"function":"server/db.(*Database).GetDecorElementPrice","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/db/getDecorElementPrice.go","line":20},"msg":"pack price: 10"}
{"time":"2025-03-10T22:59:40.727012+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).GetDecorationCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/decorationCost.go","line":30},"msg":"decoration cost retrieved","postcardPrice":20,"packPrice":10}
{"time":"2025-03-10T22:59:40.727018+03:00","level":"DEBUG","source":{"function":"server/businessLogic.updateTotalCost","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":100},"msg":"total cost updated","newTotalCost":1580}
{"time":"2025-03-10T22:59:40.727061+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).handleBouquetsRequest","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/requestToHandledBouquets.go","line":35},"msg":"bouquets request handled successfully"}
{"time":"2025-03-10T22:59:40.727095+03:00","level":"INFO","source":{"function":"server/businessLogic.decodeOrder","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/parseOrder.go","line":41},"msg":"total cost calculated","totalCost":2585}
{"time":"2025-03-10T22:59:40.7271+03:00","level":"INFO","source":{"function":"server/businessLogic.(*OrderManager).ParseOrder","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/businessLogic/parseOrder.go","line":23},"msg":"order parsed successfully","orderID":1}
{"time":"2025-03-10T22:59:40.727107+03:00","level":"INFO","source":{"function":"server/handlers.(*Server).OrderHandling","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/handlers/info.go","line":80},"msg":"payment data key found","payment":{"orderID":1,"IsPaid":true,"paymentID":368263273238023}}
{"time":"2025-03-10T22:59:40.727128+03:00","level":"INFO","source":{"function":"server/handlers.(*Server).OrderHandling","file":"/Volumes/Data/Go_Projects/flower_shop/server_side/handlers/info.go","line":90},"msg":"order successfully returned","order":{"orderID":1,"bouquetsList":[{"position":1,"bouquet":[{"name":"Роза","color":"Жёлтая","quantity":11,"cost":440},{"name":"Лилия","color":"Жёлтая","quantity":5,"cost":450}],"decoration":{"postcard":{"message":"С 8 марта!","cost":15},"pack":{"material":"Крафт","cost":100},"decorationCost":115},"bouquetCost":1005},{"position":2,"bouquet":[{"name":"Ромашка","color":"Белая","quantity":50,"cost":1000},{"name":"Пион","color":"Белый","quantity":5,"cost":550}],"decoration":{"postcard":{"message":"С Днём Влюбленных!","cost":20},"pack":{"material":"Лента","cost":10},"decorationCost":30},"bouquetCost":1580}],"orderCost":2585,"paymentID":368263273238023}}
